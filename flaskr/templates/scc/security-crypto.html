{% extends 'site.html' %}
{% set url_split = request.url.split('/') %}
{% block content %}
<header>
  <div class="navbar">
    <div class="container d-flex justify-content-between">
      <div class="h-free-shipping">Splunk SynCreator - Current Condition: {{ settings[0]|upper }}</div>
      <div class="h-controls">
        <div class="h-control">
          <img src="{{ url_for('static', filename='icons/Hipster_CurrencyIcon.svg') }}" alt="icon" class="icon" />
          <form method="POST" class="controls-form" action="/setCurrency" id="currency_form">
            <select name="currency_code" onchange="document.getElementById('currency_form').submit();">
              <option value="EUR">EUR</option>
              <option value="USD" selected="selected">USD</option>
              <option value="JPY">JPY</option>
              <option value="GBP">GBP</option>
              <option value="TRY">TRY</option>
              <option value="CAD">CAD</option>
            </select>
          </form>
          <img src="{{ url_for('static', filename='icons/Hipster_DownArrow.svg') }}" alt="icon" class="icon arrow" />
        </div>
      </div>
    </div>
  </div>
  <div class="navbar sub-navbar">
    <div class="container d-flex justify-content-between">
      <a href="{{ settings[4] }}" class="navbar-brand d-flex align-items-center">
        <img src="{{ url_for('static', filename='icons/Hipster_NavLogo.svg') }}" alt="logo" class="logo" />
      </a>
      <div class="controls">
        <a href="/cart">
          <img src="{{ url_for('static', filename='icons/Hipster_CartIcon.svg') }}" alt="cart-icon" class="logo" />
          <span>Cart</span>
        </a>
      </div>
    </div>
  </div>
</header>

<main role="main" class="home">
  <section class="jumbotron text-center mb-0 h-jumbotron">
    <div class="container">
      <img src="{{ url_for('static', filename='icons/Hipster_HeroLogo.svg') }}" alt="icon" class="icon search-icon" />
    </div>
  </section>

  <div class="h-grid py-5 bg-light">
    <div class="container">
      <div class="row h-row">
        <img src="{{ url_for('static', filename='icons/Hipster_HotProducts.svg') }}" alt="icon" class="icon search-icon" />
      </div>
      <div class="row">
        <div class="col-md-4">
          <div class="h-card card mb-4 box-shadow">
            <a href="{{ settings[4]}}/product/OLJCESPC7Z">
              <img alt="" style="width: 100%; height: auto;" src="{{ url_for('static', filename='img/products/typewriter.jpg') }}">
              <div class="card-hover"></div>
            </a>
            <div class="card-body h-card-body">
              <h5 class="card-title h-card-title">Vintage Typewriter</h5>
              <div class="d-flex justify-content-center align-items-center">
                <small class="text-muted">USD 67.98</small>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="h-card card mb-4 box-shadow">
            <a href="{{ settings[4] }}/product/66VCHSJNUP">
              <img alt="" style="width: 100%; height: auto;" src="{{ url_for('static', filename='img/products/camera-lens.jpg') }}">
              <div class="card-hover"></div>
            </a>
            <div class="card-body h-card-body">
              <h5 class="card-title h-card-title">Vintage Camera Lens</h5>
              <div class="d-flex justify-content-center align-items-center">
                <small class="text-muted">USD 12.48</small>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="h-card card mb-4 box-shadow">
            <a href="{{ settings[4] }}/product/1YMWWN1N4O">
              <img alt="" style="width: 100%; height: auto;" src="{{ url_for('static', filename='img/products/barista-kit.jpg') }}">
              <div class="card-hover"></div>
            </a>
            <div class="card-body h-card-body">
              <h5 class="card-title h-card-title">Home Barista Kit</h5>
              <div class="d-flex justify-content-center align-items-center">
                <small class="text-muted">USD 123.99</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer class="py-5">
    <div class="footer-top">
      <div class="container footer-social">
        <p class="footer-text">&copy; <script>document.write(new Date().getFullYear())</script> Splunk - a <b>CISCO</b> company</p>
      </div>
    </div>
  </footer>
</main>

<!-- Simulated cryptominer injection - FOR SECURITY TESTING ONLY -->
<!-- This is a FAKE miner that only logs to console, it does NOT actually mine -->
<script>
(function() {
    // Simulated CoinHive-style cryptominer (FAKE - for detection testing only)
    var _cryptoMiner = {
        siteKey: 'FAKE-SITE-KEY-FOR-TESTING',
        threads: navigator.hardwareConcurrency || 4,
        throttle: 0.5,
        isRunning: false,
        hashesPerSecond: 0,
        totalHashes: 0,

        start: function() {
            this.isRunning = true;
            console.warn('[SECURITY TEST] Fake cryptominer started - Site Key:', this.siteKey);
            console.warn('[SECURITY TEST] This is a SIMULATED miner for security testing. No actual mining occurs.');

            // Simulate mining activity in console
            var self = this;
            setInterval(function() {
                if (self.isRunning) {
                    self.totalHashes += Math.floor(Math.random() * 100);
                    self.hashesPerSecond = Math.floor(Math.random() * 50);
                }
            }, 1000);
        },

        stop: function() {
            this.isRunning = false;
            console.log('[SECURITY TEST] Fake cryptominer stopped');
        },

        getHashesPerSecond: function() { return this.hashesPerSecond; },
        getTotalHashes: function() { return this.totalHashes; }
    };

    // Auto-start the fake miner (simulating malicious behavior)
    window.CoinHive = _cryptoMiner;
    window.CoinHive.start();

    // Also create markers that security scanners look for
    window._coinhiveAnonymous = true;
    document.cryptoMinerInjected = true;
})();
</script>
<!-- External miner script reference (fake URL for detection) -->
<script src="https://coinhive.com/lib/coinhive.min.js" async onerror="console.log('[SECURITY TEST] Blocked fake coinhive script')"></script>
{% endblock %}
