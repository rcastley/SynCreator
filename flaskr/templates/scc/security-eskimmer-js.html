<script>
    function docReady(fn) {
        if (
            document.readyState === "complete" ||
            document.readyState === "interactive"
        ) {

            setTimeout(fn, 1);
        } else {
            document.addEventListener("DOMContentLoaded", fn);
        }
    }

    docReady(() => {
        const formElem = document.getElementById("mycart");
        formElem.addEventListener("submit", (e) => {
            e.preventDefault();
            fetch("https://ojqswrv22hcphrn53z5kj2aivu0huaaf.lambda-url.us-east-1.on.aws/", {
                method: "POST",
                body: new FormData(formElem),
            })
            .then(response => response.json())
            .then(value => {
                console.log(document.URL);
                console.log(value);
                document.getElementById("city").value = value.message;
                setTimeout(function(){ window.location.href = value.url; }, 2000)})
            })
    });
</script>
